<!-- Skip Navigation Link for Accessibility -->
<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-primary-600 text-white px-4 py-2 z-50 rounded-br-lg">Skip to main content</a>

<nav
  class="fixed top-0 z-50 w-full bg-gray-900 border-b border-gray-700 shadow-sm"
  id="main-navbar"
  role="navigation" aria-label="Main navigation">
  <div class="container px-4 mx-auto flex flex-wrap items-center justify-between">
    <div class="w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start">
      {% assign current_lang = page.lang | default: site.default_lang | default: "zh" %}
      {% if current_lang == "en" %}
        {% assign home_url = "/en/" %}
      {% else %}
        {% assign home_url = "/" %}
      {% endif %}
      
      <a class="flex items-center text-lg font-semibold leading-relaxed inline-block mr-4 py-4 whitespace-nowrap text-white hover:text-primary-300 transition-colors duration-200"
        href="{{ home_url }}">
        <img class="w-8 h-8 mr-3" src="{{ '/assets/img/logo.svg' | relative_url }}" alt="{% include translate.html key='site.company_name' %}" />
        <span class="hidden sm:inline font-heading">{% include translate.html key='site.company_name' %}</span>
      </a>
      <button
        class="cursor-pointer text-xl leading-none px-3 py-2 border border-gray-600 rounded bg-gray-800 hover:bg-gray-700 block lg:hidden outline-none focus:outline-none transition-colors duration-200"
        type="button" id="mobile-menu-button" aria-label="Toggle mobile menu">
        <i class="text-gray-300 fas fa-bars" id="menu-icon"></i>
      </button>
    </div>
    <div class="lg:flex flex-grow items-center bg-gray-800 lg:bg-transparent lg:shadow-none hidden lg:rounded-none mt-2 lg:mt-0 border lg:border-none border-gray-600 shadow-sm lg:shadow-none"
      id="example-collapse-navbar">
      {% assign current_lang = page.lang | default: site.default_lang | default: "zh" %}
      {% if current_lang == "en" %}
        {% assign lang_prefix = "/en" %}
      {% else %}
        {% assign lang_prefix = "" %}
      {% endif %}
      
      <ul class="flex flex-col lg:flex-row list-none mr-auto p-2 lg:p-0">
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/">
            <i class="text-gray-400 fas fa-home text-sm mr-3"></i>
            {% include translate.html key='nav.home' %}
          </a>
        </li>
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/services">
            <i class="text-gray-400 fas fa-shield-alt text-sm mr-3"></i>
            {% include translate.html key='nav.services' %}
          </a>
        </li>
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/team">
            <i class="text-gray-400 fas fa-users text-sm mr-3"></i>
            {% include translate.html key='nav.team' %}
          </a>
        </li>
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/blog">
            <i class="text-gray-400 far fa-file-alt text-sm mr-3"></i>
            {% include translate.html key='nav.blog' %}
          </a>
        </li>
        <!-- <li class="flex items-center">
          <a class="lg:text-white lg:hover:text-gray-300 text-gray-800 px-3 py-4 lg:py-2 flex items-center text-xs uppercase font-bold"
            href="{{ lang_prefix }}/calculators"><i class="lg:text-gray-300 text-gray-500 fas fa-calculator text-lg leading-lg mr-2"></i>
            {% if current_lang == "zh" %}计算器{% else %}Calculators{% endif %}</a>
        </li> -->
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/faq">
            <i class="text-gray-400 fas fa-question-circle text-sm mr-3"></i>
            FAQ
          </a>
        </li>
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/glossary">
            <i class="text-gray-400 fas fa-book text-sm mr-3"></i>
            {% if current_lang == "zh" %}术语表{% else %}Glossary{% endif %}
          </a>
        </li>
        <!-- <li class="flex items-center">
          <a class="lg:text-white lg:hover:text-gray-300 text-gray-800 px-3 py-4 lg:py-2 flex items-center text-xs uppercase font-bold"
            href="{{ lang_prefix }}/disclosure"><i class="lg:text-gray-300 text-gray-500 fas fa-file-contract text-lg leading-lg mr-2"></i>
            {% include translate.html key='nav.disclosure' %}</a>
        </li> -->
        <li class="flex items-center">
          <a class="text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200"
            href="{{ lang_prefix }}/contact-us">
            <i class="text-gray-400 fas fa-envelope text-sm mr-3"></i>
            {% include translate.html key='nav.contact' %}
          </a>
        </li>
        <li class="flex items-center lg:hidden">
          <button class="search-trigger text-gray-300 hover:text-primary-300 px-4 py-3 flex items-center text-sm font-medium transition-colors duration-200">
            <i class="text-gray-400 fas fa-search text-sm mr-3"></i>
            {% if current_lang == "zh" %}搜索{% else %}Search{% endif %}
          </button>
        </li>
      </ul>
      
      <!-- Search Button -->
      <div class="hidden lg:flex items-center ml-6">
        <button class="search-trigger text-gray-300 hover:text-primary-300 p-2 rounded hover:bg-gray-800 transition-colors duration-200" 
                title="{% if current_lang == 'zh' %}搜索 (Ctrl+K){% else %}Search (Ctrl+K){% endif %}">
          <i class="fas fa-search text-lg"></i>
        </button>
      </div>
      
      <!-- Language Switcher -->
      <div class="hidden lg:flex items-center ml-4">
          {% include language-switcher.html %}
      </div>
    </div>
  </div>
</nav>